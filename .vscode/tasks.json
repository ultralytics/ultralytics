{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Extract KITTI image_2 (left)",
      "type": "shell",
      "command": "mkdir -p /root/autodl-tmp && unzip -o -q /root/autodl-pub/KITTI/object/data_object_image_2.zip -d /root/autodl-tmp/",
      "problemMatcher": []
    },
    {
      "label": "Extract KITTI image_3 (right)",
      "type": "shell",
      "command": "mkdir -p /root/autodl-tmp && unzip -o -q /root/autodl-pub/KITTI/object/data_object_image_3.zip -d /root/autodl-tmp/",
      "problemMatcher": []
    },
    {
      "label": "Extract KITTI labels (label_2)",
      "type": "shell",
      "command": "mkdir -p /root/autodl-tmp && unzip -o -q /root/autodl-pub/KITTI/object/data_object_label_2.zip -d /root/autodl-tmp/",
      "problemMatcher": []
    },
    {
      "label": "Extract KITTI calibration (calib)",
      "type": "shell",
      "command": "mkdir -p /root/autodl-tmp && unzip -o -q /root/autodl-pub/KITTI/object/data_object_calib.zip -d /root/autodl-tmp/",
      "problemMatcher": []
    },
    {
      "label": "Extract ALL KITTI object zips",
      "dependsOn": [
        "Extract KITTI image_2 (left)",
        "Extract KITTI image_3 (right)",
        "Extract KITTI labels (label_2)",
        "Extract KITTI calibration (calib)"
      ],
      "dependsOrder": "sequence",
      "type": "shell",
      "command": "echo 'Completed all KITTI extraction tasks.'",
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "detail": "Runs individual KITTI extraction tasks sequentially"
    },
    {
      "label": "Setup: Install zsh and oh-my-zsh",
      "type": "shell",
      "command": "if command -v zsh >/dev/null 2>&1 && [ -d ~/.oh-my-zsh ]; then echo 'zsh and oh-my-zsh already installed'; else apt-get update && apt-get install -y zsh curl && sh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\" || true; fi",
      "problemMatcher": [],
      "detail": "Installs zsh and oh-my-zsh framework if missing"
    },
    {
      "label": "Setup: Configure zsh plugins/theme",
      "type": "shell",
      "command": "grep -q 'plugins=(git zsh-autosuggestions zsh-syntax-highlighting)' ~/.zshrc || echo 'plugins=(git zsh-autosuggestions zsh-syntax-highlighting)' >> ~/.zshrc; grep -q 'ZSH_THEME=\"robbyrussell\"' ~/.zshrc || echo 'ZSH_THEME=\"robbyrussell\"' >> ~/.zshrc",
      "problemMatcher": [],
      "detail": "Appends plugin list and theme only if not present"
    },
    {
      "label": "Setup: Change default shell to zsh",
      "type": "shell",
      "command": "if [ \"$SHELL\" != \"$(which zsh)\" ]; then chsh -s $(which zsh); else echo 'Default shell already zsh'; fi",
      "problemMatcher": [],
      "detail": "Sets user's login shell to zsh if not already"
    },
    {
      "label": "Setup: Conda init zsh",
      "type": "shell",
      "command": "if grep -q 'conda initialize' ~/.zshrc; then echo 'Conda already initialized for zsh'; else /root/miniconda3/bin/conda init zsh; fi",
      "problemMatcher": [],
      "detail": "Initializes conda for zsh only if not already"
    },
    {
      "label": "Setup: Git global config",
      "type": "shell",
      "command": "[ \"$(git config --global user.email)\" = 'rick@ultralytics.com' ] || git config --global user.email 'rick@ultralytics.com'; [ \"$(git config --global user.name)\" = 'rick' ] || git config --global user.name 'rick'; echo 'Git config: email='$(git config --global user.email)', name='$(git config --global user.name)''",
      "problemMatcher": [],
      "detail": "Sets global git user identity if different"
    },
    {
      "label": "Setup: Full environment",
      "dependsOn": [
        "Setup: Install zsh and oh-my-zsh",
        "Setup: Configure zsh plugins/theme",
        "Setup: Change default shell to zsh",
        "Setup: Conda init zsh",
        "Setup: Git global config"
      ],
      "dependsOrder": "sequence",
      "type": "shell",
      "command": "echo 'Environment setup tasks executed.'",
      "problemMatcher": [],
      "group": {
        "kind": "test",
        "isDefault": false
      },
      "detail": "Runs setup tasks sequentially with idempotent checks"
    }
  ]
}
